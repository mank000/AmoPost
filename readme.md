# Farpost & Amocrm integration

Данный проект позволяет связать Фарпост и Amocrm. Сообщения из Фарпост отправляются в Amo, примечания из amo отправляются в фарпост.

## Установка и настройка
1. Клонирование репозитория
```bash
git clone
```

2. Сборка и запуск с Docker Compose 

Проект полностью контейнеризирован.

Используйте следующие команды для сборки и запуска сервисов:
```
docker compose up -d
```

## Доступ к админ-панели: http://localhost:8000/admin/

Имя пользователя: admin

Пароль: admin

В админ-панели можно изменять настройки, такие как AmoCrm key и Farpost key.

## Инструкция
1. В amocrm: -> amoМаркет -> + webhooks. Укажите там адрес до сервера. например http://193.164.150.124/amocrm/msg_webhook/

2. На этой же странице в меню(где три точки) создайте внешнюю интеграцию, во вкладке установленные произведите настройку только что созданной интеграции.
Необходимо предоставить доступ: Все, контроль дублей: True

3. Во вкладке Ключи и доступы получаем долгосрочный токен. Копируем его и вставляем в админку

4. Фарпост: в devtool во вкладке "приложение" необходимо найти куку под названием boobs. Вставляем ее в админку

5. Перезапускаем приложение в консоли
```
docker compose up -d
```
6. Во вкладке "Периодические задачи" можно изменить периодичность выполнения запросов на фарпост.

Есть недочёт, сообщения до включения бота в amocrm не копируются.

Фарпост:

log: +7983689160

pass: B@CXF9tv6fLBzpM

AmoCrm: 

kozmin_arti@mail.ru

At4)UAGyDeGA

https://kozminarti.amocrm.ru/

## Локальное тестирование
Для локального тестирования необходимо 
```bash
sudo docker compose -f docker-compose.dev.yml
```